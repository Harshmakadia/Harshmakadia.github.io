window.addEventListener("load", function() {    var value = null;    var height = "100%";    var width = "100%";    var expectedValue = "true";    script_index = 0;    for (; script_index < document.getElementsByTagName("script").length; script_index++) {        if (-1 !== document.getElementsByTagName("script")[script_index].src.indexOf("https://app.test.wotnot.io")) {            value = document.getElementsByTagName("script")[script_index].getAttribute("widget-container-id");            if (document.getElementsByTagName("script")[script_index].getAttribute("widget-height")) {                height = document.getElementsByTagName("script")[script_index].getAttribute("widget-height");            }            if (document.getElementsByTagName("script")[script_index].getAttribute("widget-width")) {                width = document.getElementsByTagName("script")[script_index].getAttribute("widget-width");            }            if ("true" != (expectedValue = document.getElementsByTagName("script")[script_index].getAttribute("widget-header-visible")) && "false" != expectedValue) {                expectedValue = "true";            }            break;        }    } var version = new Date().toISOString();    var el = document.createElement("iframe");    el.setAttribute("id", "frame");    el.setAttribute("class", "new-design-bot");    el.style.width = "110px";    el.style.height = "110px";    el.style.position = value ? "inherit" : "fixed";    el.style.zIndex = "2147483647";    el.style.right = screen.width <= 768 ? "0" : "15px";    el.style.bottom = screen.width <= 768 ? "0" : "-5px";    el.style.border = "none";    el.style.visibility = "hidden";    el.style.opacity = "0";    el.addEventListener("load", function() {        if (value) {            window.postMessage(JSON.stringify({                type: "wot_parent_element",                header_visible: expectedValue            }), "*");            var DOC = document.getElementById("frame").contentWindow.document;            if (DOC.getElementsByClassName("wot-bubble") && DOC.getElementsByClassName("wot-bubble").length) {                DOC.getElementsByClassName("wot-bubble")[0].click();                setTimeout(function() {                    el.style.width = width;                    el.style.height = height;                    el.style.maxWidth = width;                    el.style.maxHeight = height;                    el.style.minHeight = "400px";                    el.style.minWidth = "360px";                    el.style.visibility = "visible";                }, 250);            }        } else {            el.style.visibility = "visible";        }    });    var iframe = document.createElement("iframe");    iframe.setAttribute("id", "wotnot-overlay-iframe");    iframe.sandbox = "allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts";    iframe.style.height = "100%";    iframe.style.width = "100%";    iframe.style.border = "none";    iframe.style.backgroundColor = "rgba(0,0,0,0.7)";    iframe.style.display = "none";    iframe.style.visibility = "hidden";    iframe.style.position = "fixed";    iframe.style.top = "0";    iframe.style.zIndex = "2147483647";    var styleTag = document.createElement("style");    styleTag.type = "text/css";    styleTag.appendChild(document.createTextNode(".image-popup-animation{-webkit-animation: fade-in 0.6s ease-in-out;       -moz-animation: fade-in 0.6s ease-in-out;  -ms-animation: fade-in 0.6s ease-in-out;   -o-animation: fade-in 0.6s ease-in-out;   animation: fade-in 0.6s ease-in-out;}.image-closeup-animation{-webkit-animation: fade-out 0.6s ease-in-out;       -moz-animation: fade-out 0.6s ease-in-out;        -ms-animation: fade-out 0.6s ease-in-out;          -o-animation: fade-out 0.6s ease-in-out;            animation: fade-out 0.6s ease-in-out;}@keyframes fade-in{    0%{        opacity:0    }    100%{        opacity:1    }}@keyframes fade-out{    0%{        opacity:1    }    100%{        opacity:0    }}"));    document.head.appendChild(styleTag);    if (value) {        document.getElementById(value).appendChild(el);    } else {        document.body.appendChild(el);    }    document.body.appendChild(iframe);    var fdoc = document.getElementById("wotnot-overlay-iframe").contentWindow.document;    fdoc.open();    fdoc.write('<!DOCTYPE html><html lang="en" style="height:100%;width:100%;"><head>    <style>        .image-popup-animation {            animation: animatezoom .6s        }        .image-closeup-animation {            animation: zoom-out .6s        }        @keyframes animatezoom {            from {                transform: scale(0)            }            to {                transform: scale(1)            }        }        @keyframes zoom-out {            from {                transform: scale(1);            }            to {                transform: scale(0);                visibility: hidden;                display: none;            }        }    </style></head><body style="margin:0px;display:flex;flex-direction:column;height:100%; overflow: hidden;" onkeydown="checkEscapeEvent(event);">    <div style="display:  flex;justify-content:  center;height: 100%;align-items:center;">        <div style="height: auto;max-width: 85%;" id="image-popup">            <div style="text-align: right;float: right;width: 5px;"> <span style="color: #e7e7e7;font-size: 45px;cursor:  pointer;font-weight:900;" class="close-popup">&times;</span> </div> <img id="enlarged-image" style="object-fit:contain;" height="100%" width="100%">        </div>        <div id="custom-demo-modal" style="height: 65%;width: auto;display: block;max-height: 60%;">            <div style="text-align: right;float: right;width: 5px;"> <span style="color: #e7e7e7;font-size: 45px;cursor:  pointer;font-weight:900;" class="close-popup">&times;</span> </div> <iframe id="custom-modal-demo" style="height: 100%; width: 100%; border: none;" allow="autoplay"> </iframe>        </div>    </div>    <script type="text/javascript">        if (screen.width <= 768) {            document.getElementById("custom-demo-modal").style.maxWidth = "90%";            document.getElementById("custom-demo-modal").style.width = "85%"; document.getElementById("image-popup").style.maxWidth = "85%";        } else {            document.getElementById("custom-demo-modal").style.maxWidth = "50%";            document.getElementById("custom-demo-modal").style.width = "50%"; document.getElementById("image-popup").style.maxWidth = "50%";       }        document.getElementsByClassName("close-popup")[0].addEventListener("click", function(params) {            window.parent.postMessage("closeImage", "*");        });        document.getElementsByClassName("close-popup")[1].addEventListener("click", function(params) {            window.parent.postMessage("closeImage", "*");        });        function checkEscapeEvent(event) {            if (event && event.keyCode === 27) {                window.parent.postMessage("closeImage", "*");            }        }    </script></body></html>');    fdoc.close();    var doc = document.getElementById("frame").contentWindow.document;    doc.open();    doc.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="https://static.wotnot.io/icon_fonts.css?v=755eb0d"><link rel="stylesheet" href="https://static.wotnot.io/static/fonts/icomoon.eot?v=755eb0d"><link rel="stylesheet" href="https://static.wotnot.io/static/fonts/icomoon.ttf?v=755eb0d"><link rel="stylesheet" href="https://static.wotnot.io/static/fonts/icomoon.woff?v=755eb0d"><link rel="stylesheet" href="https://static.wotnot.io/static/fonts/icomoon.svg?v=755eb0d"><link rel="stylesheet" href="https://cdn.test.wotnot.io/755eb0d/css/filepond.min.css?v=755eb0d"><link rel="stylesheet" href="https://cdn.test.wotnot.io/755eb0d/css/new_landing_page.css?v=755eb0d"></head><body><input type="hidden" class="secret-key" value="6WVDVERejHp4113911644219vgGJCFAF" /><input type="hidden" id="wt-referral-url" /><div id="content"></div><script>document.getElementById("wt-referral-url").value = window.parent.document.referrer;</script><script type="text/javascript" src="https://cdn.polyfill.io/v2/polyfill.min.js"></script><script type="text/javascript" src="https://cdn.test.wotnot.io/755eb0d/dist/new_design_landing.js?v=' + version + '" charset="utf-8"></script></body></html>');    doc.close();    var container = document.createElement("iframe");    container.setAttribute("id", "wt-bot-popup");    container.style.position = "fixed";    container.style.border = "none";    container.style.display = "none";    container.style.right = "15px";    container.style.overflow = "hidden";    container.style.bottom = "65px";    container.style.width = screen.width <= 768 ? "310px" : "375px";    container.style.height = "100%";    container.style.maxHeight = screen.width <= 768 ? "315px" : "277px";    container.style.zIndex = "2147483647";    document.body.appendChild(container);    var objDoc = document.getElementById("wt-bot-popup").contentWindow.document;    objDoc.open();    objDoc.write('<html><head><meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900" /> <style>        #popup-container {            border-radius: 8px;            background: #ffffff;            position: fixed;            width: 90%;            cursor: pointer;            box-shadow: 4px 10px 40px 0px rgba(0, 0, 0, 0.25);            right: 22px;            margin-left: 30px;            margin-top: 15px;            bottom: 40px;            z-index: 2147483647 !important;            display:none;        }#popup-close-button {    width: 25px;    height: 25px;    padding-left: 4px;    border: 2px solid #8d9098;    border-radius: 50%;    background: white;    padding: 1px;    display: flex;    justify-content: center;    align-items: center;    cursor: pointer; }#popup-button {    position: absolute;    top: -12px;    left: -12px;}#popup-close-button svg{    height: 13px;width: 13px;} #popup-message{padding:30px 40px;font-family: Poppins, sans-serif;font-size: 14px;font-weight: 400;line-height: 20px;} @media only screen and (max-device-width :768px) { #popup-container{width: 88%;  } #popup-message{ padding: 20px 40px; }}</style></head><body><div><div id="popup-container"></div></div><script type="text/javascript" src="https://cdn.test.wotnot.io/755eb0d/dist/popup_message.js?v=755eb0d"></script></body></html>');    objDoc.close();    el.contentWindow.document.addEventListener("DOMSubtreeModified", function() {        if (el.contentWindow.document.body && el.contentWindow.document.body.innerHTML) {            el.style.opacity = "1";        } else {            el.style.opacity = "0";        }        if (doc.getElementsByClassName("wot-bubble") && doc.getElementsByClassName("wot-bubble").length) {            doc.getElementsByClassName("wot-bubble")[0].addEventListener("click", function() {                if (doc.getElementsByClassName("wot-bubble walkthrough").length) {                    doc.getElementsByClassName("wot-bubble")[0].classList.remove("walkthrough");                }                if (screen.width <= 768) {                    if ("0" === window.getComputedStyle(doc.getElementById("open")).getPropertyValue("opacity")) {                        el.style.height = "110px";                        el.style.width = "110px";                    } else {                        el.style.height = "100%";                        el.style.width = "100%";                    }                } else {                    if ("0" === window.getComputedStyle(doc.getElementById("open")).getPropertyValue("opacity")) {                        setTimeout(function() {                            el.style.width = "110px";                            el.style.minHeight = "50px";                            el.style.minWidth = "50px";                            el.style.height = "110px";                        }, 260);                    } else {                        el.style.height = "calc(100% - 20px)";                        el.style.width = "420px";                        el.style.minWidth = "330px";                        el.style.maxHeight = "750px";                        el.style.minHeight = "600px";                    }                }            });        }        if (doc.getElementsByClassName("header-close") && doc.getElementsByClassName("header-close").length) {            doc.getElementsByClassName("header-close")[0].addEventListener("click", function() {                if (screen.width <= 768) {                    if ("0" === window.getComputedStyle(doc.getElementById("open")).getPropertyValue("opacity")) {                        el.style.height = "110px";                        el.style.width = "110px";                    } else {                        el.style.height = "100%";                        el.style.width = "100%";                    }                }            });        }    });    el.onload = function() {        document.getElementById("frame").contentWindow.document;    };    window.addEventListener("resize", function() {        if (!value) {            var base = document.getElementById("frame").contentWindow.document;            base.getElementsByClassName("header-close")[0];            if (screen.width <= 768) {                if ("1" === window.getComputedStyle(base.getElementById("open")).getPropertyValue("opacity")) {                    el.style.height = "110px";                    el.style.width = "110px";                    base.getElementsByClassName("wot-bubble")[0].style.display = "flex";                } else {                    el.style.height = "100%";                    el.style.width = "100%";                    base.getElementsByClassName("wot-bubble")[0].style.display = "none";                }                el.style.bottom = "0px";                el.style.right = "0px";            } else {                if ("1" === window.getComputedStyle(base.getElementById("open")).getPropertyValue("opacity")) {                    el.style.width = "110px";                    el.style.minHeight = "50px";                    el.style.minWidth = "50px";                    el.style.maxHeight = "110px";                    base.getElementsByClassName("wot-bubble")[0].style.display = "flex";                } else {                    el.style.height = "calc(100% - 20px)";                    el.style.minHeight = "600px";                    el.style.minWidth = "330px";                    el.style.maxHeight = "750px";                    el.style.width = "420px";                    base.getElementsByClassName("wot-bubble")[0].style.display = "flex";                }                el.style.bottom = "-5px";                el.style.right = "10px";            }        }    });    window.addEventListener("message", function(textFile) {        var overlayFrameDoc = document.getElementById("wotnot-overlay-iframe").contentWindow.document;        var frameDoc = document.getElementById("frame").contentWindow.document;        var popupIframe = document.getElementById("wt-bot-popup");        var overlayIframe = document.getElementById("wotnot-overlay-iframe");        if ("closeImage" == textFile.data) {            overlayIframe.className = "image-closeup-animation";            setTimeout(function() {                overlayFrameDoc.getElementById("enlarged-image").src = "";                overlayFrameDoc.getElementById("custom-modal-demo").src = ""; overlayFrameDoc.getElementById("custom-demo-modal").style.display = "none"; overlayFrameDoc.getElementById("image-popup").style.display = "block";                overlayIframe.style.display = "none";                overlayIframe.style.visibility = "hidden";            }, 500);        } else {            if (textFile.data && function(pStringValue) {                    try {                        JSON.parse(pStringValue);                    } catch (e) {                        return false;                    }                    return true;                }(textFile.data)) {                var options = JSON.parse(textFile.data);                if (options.type && "image" === options.type) {                    overlayFrameDoc.getElementById("enlarged-image").src = options.url;                    overlayFrameDoc.getElementById("custom-demo-modal").style.display = "none"; overlayFrameDoc.getElementById("image-popup").style.display = "block";                    overlayIframe.style.visibility = "visible";                    overlayIframe.style.display = "block";                    overlayIframe.className = "image-popup-animation"; document.getElementById("wotnot-overlay-iframe").focus();               }                var iframe = document.getElementById("wt-bot-popup");                if ("autoOpenChatWindow" == options.type) {                    frameDoc.getElementsByClassName("wot-bubble")[0].click();                }                if ("popup" === options.type) {                    popupIframe.style.display = "block";                    popupIframe.contentWindow.document.getElementById("popup-container").style.display = "block";                }                if ("closePopup" === options.type) {                    popupIframe.style.display = "none";                    popupIframe.contentWindow.document.getElementById("popup-container").style.display = "none";                }                if ("popupTriggered" === options.type) {                    frameDoc.getElementsByClassName("wot-bubble")[0].click();                    popupIframe.style.display = "none";                    popupIframe.contentWindow.document.getElementById("popup-container").style.display = "none";                }                if ("close-popup" == options.type) {                    popupIframe.style.display = "none";                    popupIframe.contentWindow.document.getElementById("popup-container").style.display = "none";                }                if ("custom_popup_modal" == options.type) {                    setTimeout(function() {                        el.style.width = "110px";                        el.style.minHeight = "50px";                        el.style.minWidth = "50px";                        el.style.height = "110px";                        $("#" + options.url).modal("show");                    }, 300);                }                if (!("send-user-message" != options.type && "open_chat_window" != options.type)) {                    if (window.custom_popup_modal && "1" === window.getComputedStyle(frameDoc.getElementById("open")).getPropertyValue("opacity")) {                        frameDoc.getElementsByClassName("wot-bubble")[0].click();                    }                }                if (options.type && "iframe" === options.type) {                    document.getElementById("wotnot-overlay-iframe").style.visibility = "visible";                    document.getElementById("wotnot-overlay-iframe").style.display = "block";                    if ("image-closeup-animation" == document.getElementById("wotnot-overlay-iframe").className) {                        document.getElementById("wotnot-overlay-iframe").className = "";                    }                    document.getElementById("wotnot-overlay-iframe").className = "image-popup-animation";                    overlayFrameDoc.getElementById("image-popup").style.display = "none";                    overlayFrameDoc.getElementById("custom-modal-demo").src = options.url;                    overlayFrameDoc.getElementById("custom-demo-modal").style.display = "block";                    document.getElementById("wotnot-overlay-iframe").focus();                }                if (options.type && "custom_script" === options.type) {                    if (options.message) {                        var scriptsPayload = JSON.parse(options.message);                        for (var i = 0; i < scriptsPayload.length; i++) {                            let script = document.createElement("script");                            script.type = "text/javascript";                            script.text = scriptsPayload[i]['script'];                            if (scriptsPayload[i]['target'] === "parent") {                                document.body.append(script);                            }                        }                    }                }            }        }    }, false);});